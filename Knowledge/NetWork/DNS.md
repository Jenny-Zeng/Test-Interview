## DNS 协议
DNS 使用 UDP 协议的端口53进行通信，也可以使用 TCP 协议。它是一个分布式数据库系统，用于将域名映射到 IP 地址，以便在互联网上定位主机和服务。
## DNS 解析
用户输入域名：用户在浏览器或其他应用程序中输入要访问的域名，比如"example.com"。
本地域名解析器查询：操作系统会首先检查本地 DNS 缓存中是否有与该域名相关的 IP 地址。如果缓存中存在，会直接返回对应的 IP 地址；否则，会继续进行查询。
本地 DNS 服务器查询：如果本地缓存中没有目标域名的 IP 地址，本地计算机会向配置的本地 DNS 服务器发起查询请求。
DNS 递归查询：本地 DNS 服务器会根据自身的缓存情况，如果没有目标域名的 IP 地址，它会依次向根域名服务器、顶级域名服务器和权威域名服务器发起递归查询，直到找到目标域名对应的 IP 地址。
域名解析过程：在递归查询的过程中，域名解析器会逐级查询域名的权威服务器，获取域名对应的 IP 地址记录（A记录或AAAA记录）。
返回 IP 地址：一旦本地 DNS 服务器找到目标域名的 IP 地址，它会将这个 IP 地址返回给用户的计算机，并在本地缓存中保存这个映射关系，以便将来更快地响应相同的查询。
建立连接：用户计算机收到 IP 地址后，就可以使用该 IP 地址建立与目标服务器的连接，开始进行通信和数据传输。

这个过程中，DNS 的分层结构和缓存机制有助于加快域名解析的速度，并减轻整个网络的负担。DNS 解析是互联网中非常重要的一环，它使得我们可以通过易记的域名来访问互联网资源，而无需记住复杂的 IP 地址。

## DNS 的查询方式
- 递归查询
比如，A——>B,B——>C,C——D，
    - 客户端向本地 DNS 服务器发起查询请求，本地 DNS 服务器负责递归向其他 DNS 服务器查询，直到找到目标域名的 IP 地址或者查询失败，本地 DNS 服务器返回查询结果给客户端
- 迭代查询
比如，A——>B,A——C，A——D
    - 客户端向本地 DNS 服务器发起查询请求
    - 本地 DNS 服务器向根域名服务器发起查询请求，根域名服务器返回指向顶级域名服务器的地址。
    - 本地 DNS 服务器向顶级域名服务器发起查询请求，顶级域名服务器返回指向权威域名服务器的地址。
    - 本地 DNS 服务器向权威域名服务器发起查询请求，权威域名服务器返回目标域名的 IP 地址。
    - 本地 DNS 服务器返回查询结果给客户端。

## ARP协议及工作方式
ARP （Address Resolution Protocol） 是在计算机网络中用于将 IP 地址映射到 MAC 地址的协议。ARP 的作用和工作方式如下：
ARP 协议的作用：
IP 地址到 MAC 地址的映射：ARP 用于解析网络设备的 IP 地址到其对应的 MAC 地址，以便正确地将数据包发送到目标设备。
局域网通信：ARP 协议主要用于局域网内的通信，帮助确定目标设备的 MAC 地址，从而实现本地网络设备之间的通信。
ARP 协议的工作方式：
ARP 请求：
当一个设备需要与另一个设备通信，但只知道目标设备的 IP 地址时，它会发送一个 ARP 请求广播到网络上，请求目标设备的 MAC 地址。
ARP 响应：
目标设备接收到 ARP 请求后，会发送一个 ARP 响应包含自己的 MAC 地址，直接发送给请求设备。
缓存机制：
接收到 ARP 响应的设备会将 IP 地址和对应的 MAC 地址存储在本地的 ARP 缓存中，以便将来快速访问相同目标设备。
ARP 缓存：
设备在通信中会维护一个 ARP 缓存表，记录已知 IP 地址与 MAC 地址的映射关系，以避免重复的 ARP 请求。
ARP 欺骗：
ARP 协议存在一种攻击形式称为 ARP 欺骗，即恶意设备发送虚假 ARP 响应，将网络流量重定向到攻击者控制的设备上，用于网络攻击。
总的来说，ARP 协议是在局域网中解析 IP 地址到 MAC 地址的重要协议，它帮助设备在通信时找到目标设备的物理地址，从而确保数据包正确传送到目标设备。ARP 在网络通信中扮演着关键的角色，确保了数据包的正确路由和传递。

## MAC地址
MAC 可理解为精准定位某个设备
1. IP地址（逻辑地址）：
作用：像“邮寄地址”，用于跨网络定位设备（比如从北京发快递到上海）。
特点：由网络管理员或DHCP分配，可动态变化（比如手机切换WiFi后IP会变）。
2. MAC地址（物理地址）：
作用：像“身份证号”，唯一标识一个网卡（NIC），出厂时烧录，通常不可变。
特点：只在本地网络（如同一个WiFi或交换机下）有效，无法跨网络直接通信。

3. 过程
电脑通过ARP协议广播询问：“谁是192.168.1.3？请告诉我你的MAC地址。”
打印机回复自己的MAC地址（如：00:1A:2B:3C:4D:5E）。
电脑将数据包封装上打印机的MAC地址，交换机根据MAC地址精准转发。

IP地址：全局寻址，决定数据包的“终点城市”。

MAC地址：本地寻址，决定数据包在“最后一公里”如何找到具体门牌号。

映射必要性：就像快递既需要地址也需要电话，IP和MAC协同工作，缺一不可！

|角色	|类比	|说明|
|---|------|----|
|IP地址|	快递单上的“收件人地址”	|告诉快递公司把包裹送到哪个城市、哪栋楼（跨网络寻址）。|
|MAC地址|	收件人的“手机号”|	快递员到了楼下后，打电话让你下楼取件（本地网络精准交付）。|
|ARP协议|	快递员查电话簿的过程|	根据地址（IP）找到你的手机号（MAC），才能联系到你。|


